
<!DOCTYPE html>
<html>
<head>
<title>Login</title>
<link rel="stylesheet" href="/css/style.css">
</head>
<body>
<div class="login-container">
<div class="login-card">
<h2>Login</h2>
<form method="POST" action="/login">
<div class="form-group">
<input type="text" name="username" placeholder="Username" required>
</div>
<div class="form-group">
<input type="password" name="password" placeholder="Password" required>
</div>
<button class="btn btn-primary" type="submit" style="width:100%">Login</button>
</form>
<a href="/auth/google/" class="google-btn">
    Login with Google
</a>
<p style="margin-top:12px;text-align:center">
    New here? <a href="/register">Create an account</a>
</p>

</div>
</div>
<!-- axios CDN -->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    //axios redirection after login
    document.querySelector('form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const username = e.target.username.value;
        const password = e.target.password.value;
        try {
            const response = await axios.post('/login', { username, password });
            if (response.status === 200) {
                window.location.href = '/dashboard';
            } else {
                alert('Login failed');
            }
        } catch (error) {
            const msg = error?.response?.data?.message || 'Invalid login credentials';
            alert('Login failed: ' + msg);
        }
    });
</script>
</body>
</html>
